      - name: Deploy to Vultr
        env:
          VULTR_HOST: ${{ github.event.inputs.vultr_host || secrets.VULTR_HOST }}
          VULTR_USER: ${{ github.event.inputs.vultr_user || secrets.VULTR_USER || 'root' }}
          SSH_PRIVATE_KEY: ${{ secrets.VULTR_SSH_KEY }}
        run: |
          mkdir -p ~/.ssh
          echo "$SSH_PRIVATE_KEY" > ~/.ssh/vultr_key
          chmod 600 ~/.ssh/vultr_key
          ssh-keyscan -H $VULTR_HOST >> ~/.ssh/known_hosts

          echo "ðŸ“¦ Deploying to $VULTR_HOST..."
          ssh -i ~/.ssh/vultr_key $VULTR_USER@$VULTR_HOST "mkdir -p /opt/docker-scrapers"

          scp -i ~/.ssh/vultr_key -r \
            nginx playwright puppeteer selenium universal scripts openmemory-src \
            docker-compose.yml install-docker-vultr.sh \
            DEPLOYMENT.md README.md \
            $VULTR_USER@$VULTR_HOST:/opt/docker-scrapers/

          ssh -i ~/.ssh/vultr_key $VULTR_USER@$VULTR_HOST <<ENDSSH
            cd /opt/docker-scrapers

            if [ ! -d "openmemory-src" ]; then
              echo "âŒ OpenMemory source missing, cloning..."
              git clone https://github.com/CaviraOSS/OpenMemory.git openmemory-src
            fi

            if [ ! -f .env ]; then
              echo "ðŸ”‘ Generating API keys..."
              bash scripts/generate-keys.sh
            fi

            echo "ðŸš€ Starting services..."
            docker-compose down
            docker-compose up -d --build
            docker-compose ps
          ENDSSH
